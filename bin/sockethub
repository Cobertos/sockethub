#!/usr/bin/env node

var nconf = require('nconf');

// assign config loading priorities (command-line, environment, cfg, defaults)
nconf.argv({
    'port': {
      alias: 'service.port',
      default: 10550
    },
    'host': {
      alias: 'service.host',
      default: 'localhost'
    }
  })
 .env()
 .file({ file: __dirname + '/../config.json' })
 .file({ file: __dirname + '/../lib/defaults.json' });

process.on('uncaughtException', function (err) {
  console.log("\nUNCAUGHT EXCEPTION - something horrible has happened!\n");
  console.log(err.stack);
  process.exit(1);
});

var Sockethub = require('./../lib/sockethub.js');

// var debugScope = process.env.DEBUG || nconf.get('debug');
// var genConfig  = nconf.get('gen-config');    // TODO

var sockethub = new Sockethub();

sockethub.boot();
